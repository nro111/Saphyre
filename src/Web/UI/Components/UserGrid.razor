<div class="table-responsive">
	<button class="btn btn-primary" @onclick="@(() => Console.WriteLine("bob"))">Test Button</button>

	<table class="table table-dark table-hover table-bordered align-middle">
		<thead>
			<tr>
				<th>Full Name</th>
				<th>Email</th>
				<th>Phone</th>
				<th>City/State</th>
				<th>DOB</th>
			</tr>
		</thead>
		<tbody>
			@foreach (var user in Users)
			{
				<tr @onclick="@(() => ShowDetails(user))" style="cursor: pointer;">
					<td>@($"{user.FirstName} {user.LastName}")</td>
					<td>@user.Email</td>
					<td>@user.Phone</td>
					<td>@($"{user.City}, {user.State}")</td>
					<td>@user.DateOfBirth.ToString("yyyy-MM-dd")</td>
				</tr>
			}
		</tbody>
	</table>
</div>

@if (isModalOpen && selectedUser != null)
{
	<div class="custom-modal-backdrop">
		<div class="custom-modal-content">
			<div class="modal-header">
				<h5>@($"{selectedUser.FirstName} {selectedUser.LastName}")</h5>
				<button class="btn-close" @onclick="CloseModal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<p><strong>Email:</strong> @selectedUser.Email</p>
				<p><strong>Phone:</strong> @selectedUser.Phone</p>
				<p>
					<strong>Address:</strong><br />
					@selectedUser.AddressLine1<br />
					@if (!string.IsNullOrWhiteSpace(selectedUser.AddressLine2))
					{
						@selectedUser.AddressLine2
				
						<br />
					}
					@($"{selectedUser.City}, {selectedUser.State} {selectedUser.PostalCode}")
				</p>
				<p><strong>DOB:</strong> @selectedUser.DateOfBirth.ToString("yyyy-MM-dd")</p>
			</div>
			<div class="modal-footer">
				<button class="btn btn-secondary" @onclick="CloseModal">Close</button>
			</div>
		</div>
	</div>
}

@code {
	[Parameter]
	public List<UserDTO> Users { get; set; } = new List<UserDTO>() {

		new UserDTO
			{
				Id = Guid.NewGuid(),
				FirstName = "Jane",
				LastName = "Doe",
				Email = "jane.doe@example.com",
				Phone = "5551234567",
				AddressLine1 = "123 Main St",
				AddressLine2 = "Apt 4B",
				City = "Springfield",
				State = "IL",
				PostalCode = "62704",
				DateOfBirth = new DateTime(1990, 5, 21)
			},
		new UserDTO
			{
				Id = Guid.NewGuid(),
				FirstName = "joe",
				LastName = "Doe",
				Email = "joe.doe@example.com",
				Phone = "1111111111",
				AddressLine1 = "123 Main St",
				AddressLine2 = "Apt 4B",
				City = "Springfield",
				State = "IL",
				PostalCode = "62704",
				DateOfBirth = new DateTime(1990, 5, 21)
			}
	};


	private UserDTO selectedUser;
	private bool isModalOpen = false;

	private void ShowDetails(UserDTO user)
	{
		selectedUser = user;
		isModalOpen = true;
		StateHasChanged(); // force re-render
	}


	private void CloseModal()
	{
		selectedUser = null;
		isModalOpen = false;
	}
}
